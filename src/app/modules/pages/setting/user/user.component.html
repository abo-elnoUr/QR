<section class="main">
  <div class="sub_main">
    <div class="d-flex justify-content-end">
      <h1 class="sec_title pb-2">ุงูุฅุนุฏุงุฏุงุช</h1>
  </div>
  <div class="users">
      <div class="d-flex justify-content-center pt-2">
          <h3 class="users-title p-0 m-0">ุงููุณุชุฎุฏููู</h3>
      </div>
      <div class="text-end my-3">
          <button class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#addUser"><i
                  class="fa-solid fa-user-tie me-2"></i>ุฅุถุงูุฉ ูุณุชุฎุฏู</button>
      </div>
      <div *ngIf="users.length == 0" class="m-auto text-center">
          <div class="d-flex justify-content-center align-content-center my-5">
              <img src="/assets/images/main/users.png" width="200" alt="no brands" />
          </div>
          <p class="mt-2">๐ ูุง ููุฌุฏ ูุณุชุฎุฏููู</p>
      </div>
      <div *ngIf="users.length > 0" class="section_2 my-3 mx-2">
          <div class="filter_search d-flex justify-content-between">
              <div class="text-end">
                  <button class="btn btn-outline-info me-1"><i class="fa-solid
          fa-filter"></i></button>
                  <button class="btn btn-outline-dark ms-1"><i class="fa-solid
          fa-code"></i></button>
              </div>
              <div class="search w-50">
                  <input type="search" class="form-control text-end" placeholder="ุฅุจุญุซ ููุง">
              </div>

          </div>
      </div>
      <div *ngIf="users.length > 0" class="section_3 rounded">
          <div class="table-responsive" style="min-height: 300px;">
              <table class="table table-hover table-borderless text-center
      caption-top text-end">
                  <caption class="me-4 text-end">ูุงุฆูุฉ ุงููุณุชุฎุฏููู <i class="fa-solid
          fa-users ms-2"></i></caption>
                  <thead>
                      <tr>
                          <th scope="col">ุงูุนูููุงุช</th>
                          <th scope="col">ุงูุฅูููู</th>
                          <th scope="col">ุงูุนููุงู</th>
                          <th scope="col">ุฅุณู ุงููุณุชุฎุฏู</th>
                          <th scope="col">ุงููุงุชู</th>
                          <th scope="col">ุงูุฅุณู</th>
                          <th scope="col">#</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr *ngFor="let user of users | paginate: { id: 'usersPagination',
        itemsPerPage: 5,
        currentPage: pUsers,
        totalItems: totalUsers }; let i= index " style="vertical-align: middle; cursor: pointer;">
                          <td>
                              <button class="btn me-1 border-0">
                                  <img src="/assets/images/main/delete.png" width="30">
                              </button>
                              <button class="btn me-1 border-0" (click)="getUser(user.id)" data-bs-toggle="modal" data-bs-target="#editUser">
                                  <img src="/assets/images/main/edit.png" width="30">
                              </button>
                          </td>
                          <td class="text-secondary">{{ user.email }}</td>
                          <td>
                              {{ user.address }}
                          </td>
                          <td class="text-primary">{{ user.userName }}</td>
                          <td>{{ user.phone }}</td>
                          <td>{{ user.firstName + ' ' + user.lastName }}</td>
                          <th scope="row">{{ i+1 }}</th>
                      </tr>

                  </tbody>
              </table>
          </div>


          <!-- pagination -->


          <div class="mx-auto text-center my-3 pb-3">
              <pagination-controls id="usersPagination" (pageChange)="pageChangedUsers($event)" (pageBoundsCorrection)="pageChangedUsers($event)" [maxSize]="9" [directionLinks]="true" [responsive]="true" previousLabel="Previous" nextLabel="Next">
              </pagination-controls>
          </div>
      </div>
  </div>
  </div>
</section>

<!-- add user modal -->

<div class="modal fade" id="addUser" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="btn-close ms-0" data-bs-dismiss="modal" aria-label="Close"></button>
              <h5 class="modal-title" id="exampleModalLabel">ุฅุถุงูุฉ</h5>

          </div>
          <div class="modal-body text-end">
              <h3 class="mb-1 text-center">ุฅุถุงูุฉ ูุณุชุฎุฏู</h3>
              <form [formGroup]="addUserForm">
                  <div class="form-group">
                      <label>ุงูุงุณู ุงูุงูู</label>
                      <app-input [control]="addUserForm.get('firstName')" [id]="'add-firstName'" [class]="'form-control mb-2 text-end'" [type]="'text'" [placeholder]="'ุงุฏุฎู ุงูุงุณู ุงูุงูู'">
                      </app-input>
                  </div>
                  <div class="form-group">
                      <label>ุงูุงุณู ุงูุซุงูู</label>
                      <app-input [control]="addUserForm.get('lastName')" [id]="'add-lastName'" [class]="'form-control mb-2 text-end'" [type]="'text'" [placeholder]="'ุงุฏุฎู ุงูุงุณู ุงูุซุงูู'">
                      </app-input>
                  </div>
                  <div class="form-group">
                      <label>ุงุณู ุงููุณุชุฎุฏู</label>
                      <app-input [control]="addUserForm.get('userName')" [id]="'add-userName'" [class]="'form-control mb-2 text-end'" [type]="'text'" [placeholder]="'ุงุฏุฎู ุงุณู ุงููุณุชุฎุฏู'">
                      </app-input>
                  </div>
                  <div class="form-group">
                      <label>ุงููุงุชู</label>
                      <app-input [control]="addUserForm.get('phone')" [id]="'add-phone'" [class]="'form-control mb-2 text-end'" [type]="'number'" [placeholder]="'ุงุฏุฎู ุงููุงุชู'">
                      </app-input>
                  </div>
                  <div class="form-group">
                      <label>ุงูุนููุงู</label>
                      <app-input [control]="addUserForm.get('address')" [id]="'add-address'" [class]="'form-control mb-2 text-end'" [type]="'text'" [placeholder]="'ุงุฏุฎู ุงูุนููุงู'">
                      </app-input>
                  </div>
                  <div class="form-group">
                      <label>ุงูุงูููู</label>
                      <app-input [control]="addUserForm.get('email')" [id]="'add-email'" [class]="'form-control mb-2 text-end'" [type]="'email'" [placeholder]="'ุงุฏุฎู ุงูุงูููู'">
                      </app-input>
                  </div>
                  <div class="form-group">
                      <label>ุงูุฑูู ุงูุณุฑู</label>
                      <app-input [control]="addUserForm.get('password')" [id]="'add-password'" [class]="'form-control mb-2 text-end'" [type]="'password'" [placeholder]="'*********'">
                      </app-input>
                  </div>
                  <div class="form-group">
                      <label>ุชุฃููุฏ ุงูุฑูู ุงูุณุฑู</label>
                      <app-input [control]="addUserForm.get('confirmPassword')" [id]="'add-confirmPassword'" [class]="'form-control mb-2
            text-end'" [type]="'password'" [placeholder]="'*********'">
                      </app-input>
                  </div>
                  <div class="mx-auto text-center">
                      <button class="btn btn-outline-primary mt-2" [disabled]="addUserForm.invalid" data-bs-dismiss="modal" (click)="addUser()"><i class="fa-solid fa-user-pen me-1"></i>ุฅูุดุงุก ูุณุชุฎุฏู</button>
                  </div>
              </form>

          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-outline-danger " data-bs-dismiss="modal">ุงุบูุงู</button>
          </div>
      </div>
  </div>
</div>

<!-- edit user modal -->
<div class="modal fade" id="editUser" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
      <div class="modal-content">
          <div class="modal-header">
              <button type="button" class="btn-close ms-0" data-bs-dismiss="modal" aria-label="Close"></button>
              <h5 class="modal-title" id="exampleModalLabel">ุชุนุฏูู</h5>

          </div>
          <div class="modal-body text-end">
              <h3 class="mb-1 text-center">ุชุนุฏูู ูุณุชุฎุฏู</h3>
              <form [formGroup]="editUserForm">
                  <div class="form-group">
                      <label>ุงูุงุณู ุงูุงูู</label>
                      <app-input [control]="editUserForm.get('firstName')" [id]="'edit-firstName'" [class]="'form-control mb-2 text-end'" [type]="'text'" [placeholder]="'ุงุฏุฎู ุงูุงุณู ุงูุงูู'">
                      </app-input>
                  </div>
                  <div class="form-group">
                      <label>ุงูุงุณู ุงูุซุงูู</label>
                      <app-input [control]="editUserForm.get('lastName')" [id]="'edit-lastName'" [class]="'form-control mb-2 text-end'" [type]="'text'" [placeholder]="'ุงุฏุฎู ุงูุงุณู ุงูุซุงูู'">
                      </app-input>
                  </div>
                  <div class="form-group">
                      <label>ุงุณู ุงููุณุชุฎุฏู</label>
                      <app-input [control]="editUserForm.get('userName')" [id]="'edit-userName'" [class]="'form-control mb-2 text-end'" [type]="'text'" [placeholder]="'ุงุฏุฎู ุงุณู ุงููุณุชุฎุฏู'">
                      </app-input>
                  </div>
                  <div class="form-group">
                      <label>ุงููุงุชู</label>
                      <app-input [control]="editUserForm.get('phone')" [id]="'edit-phone'" [class]="'form-control mb-2 text-end'" [type]="'number'" [placeholder]="'ุงุฏุฎู ุงููุงุชู'">
                      </app-input>
                  </div>
                  <div class="form-group">
                      <label>ุงูุนููุงู</label>
                      <app-input [control]="editUserForm.get('address')" [id]="'edit-address'" [class]="'form-control mb-2 text-end'" [type]="'text'" [placeholder]="'ุงุฏุฎู ุงูุนููุงู'">
                      </app-input>
                  </div>
                  <div class="form-group">
                      <label>ุงูุงูููู</label>
                      <app-input [control]="editUserForm.get('email')" [id]="'edit-email'" [class]="'form-control mb-2 text-end'" [type]="'email'" [placeholder]="'ุงุฏุฎู ุงูุงูููู'">
                      </app-input>
                  </div>
                  <div class="form-group">
                      <label>ุงูุฑูู ุงูุณุฑู</label>
                      <app-input [control]="editUserForm.get('password')" [id]="'edit-password'" [class]="'form-control mb-2 text-end'" [type]="'password'" [placeholder]="'*********'">
                      </app-input>
                  </div>
                  <div class="form-group">
                      <label>ุชุฃููุฏ ุงูุฑูู ุงูุณุฑู</label>
                      <app-input [control]="editUserForm.get('confirmPassword')" [id]="'edit-confirmPassword'" [class]="'form-control mb-2
            text-end'" [type]="'password'" [placeholder]="'*********'">
                      </app-input>
                  </div>
                  <div class="mx-auto text-center">
                      <button class="btn btn-outline-info mt-2" data-bs-dismiss="modal"  (click)="editUser()"><i class="fa-regular fa-pen-to-square me-1"></i>ุชุนุฏูู ูุณุชุฎุฏู</button>
                  </div>
              </form>

          </div>
          <div class="modal-footer">
              <button type="button" class="btn btn-outline-danger " data-bs-dismiss="modal">ุงุบูุงู</button>
          </div>
      </div>
  </div>
</div>
